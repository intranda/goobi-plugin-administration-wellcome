<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:composite="http://xmlns.jcp.org/jsf/composite" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:x="http://myfaces.apache.org/tomahawk" xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites" xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <composite:interface>
    </composite:interface>

    <composite:implementation>
        <link rel="stylesheet" type="text/css" href="template/js/DataTables/datatables.css" />
        <script type="text/javascript" src="template/js/DataTables/datatables.js"></script>

        <h:form id="counterscript" prependId="false" styleClass="form-horizontal form-bordered">
            <div class="row">
                <div class="col-sm-12">
                    <div class="box box-color box-bordered lightgrey">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-plug"></i>
                                <h:outputText value="#{msgs[AdministrationForm.administrationPlugin.title]}" />
                            </h3>
                        </div>
                        <div class="box-content nopadding">

                            <div class="tab-content tab-content-inline tab-content-bottom padding-all-more">
                                <intranda:formInputCalendar2 name="start" label="#{msgs.zeitraum} #{msgs.from}" field="#{AdministrationForm.administrationPlugin.startDate}" required="false" />
                                <intranda:formInputCalendar2 name="end" label="#{msgs.zeitraum} #{msgs.to}" field="#{AdministrationForm.administrationPlugin.endDate}" required="false" />

                                <intranda:formInputCheckBox label="#{msgs.includeOutdatedData}" style="border-bottom: 1px solid #DDDDDD;" field="#{AdministrationForm.administrationPlugin.includeOutdatedData}" name="check" />

                            </div>
                            <div class="form-actions">
                                <h:commandLink styleClass="btn btn-primary submitOnEnter font-size-s pull-right" id="absenden" action="#{AdministrationForm.administrationPlugin.getData}">
                                    <i class="fa fa-search margin-right-5"></i>
                                    <h:outputText value="#{msgs.filter}" />
                                </h:commandLink>

                                <!--                                 <h:commandLink styleClass="btn font-size-s" id="cancel" action="#{AdministrationForm.administrationPlugin.resetData}" immediate="true"> -->
                                <!--                                     <h:outputText value="#{msgs.clear}" /> -->
                                <!--                                 </h:commandLink> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <br />

            <h:panelGroup class="row" rendered="#{AdministrationForm.administrationPlugin.detailList == null and AdministrationForm.administrationPlugin.dataList != null}">
                <div class="col-sm-12">
                    <h:commandLink style="margin-bottom: 5px;" styleClass="btn font-size-s pull-right" id="download" action="#{AdministrationForm.administrationPlugin.download}" immediate="true">
                        <i class="fa fa-download margin-right-5"></i>
                        <h:outputText value="#{msgs.downloadCsv}" />
                    </h:commandLink>
                    <br />
                    <x:dataTable id="counterscriptTable" styleClass="table table-hover table-nomargin dataTable table-bordered responsive" var="item" value="#{AdministrationForm.administrationPlugin.paginatorList}">

                        <x:column styleClass="#{!item.active ? 'inactive':'active'}" rendered="false">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.id}" />
                            </f:facet>
                            <h:outputText value="#{item.id}" />
                        </x:column>

                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.creationDate}" />
                            </f:facet>
                            <h:outputText value="#{item.creationDate}" />
                        </x:column>

                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.modificationDate}" />
                            </f:facet>
                            <h:outputText value="#{item.modificationDate}" />
                        </x:column>

                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.deletionDate}" />
                            </f:facet>
                            <h:outputText value="#{item.deletionDate}" />
                        </x:column>


                        <x:column styleClass="#{!item.active ? 'inactive':'active'}" rendered="false">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.filename}" />
                            </f:facet>
                            <h:outputText value="#{item.filename}" />
                        </x:column>

                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.bnumber}" />
                            </f:facet>
                            <h:outputText value="#{item.bnumber}" />
                        </x:column>

                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.material}" />
                            </f:facet>
                            <h:outputText value="#{item.material}" />
                        </x:column>

                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.accessStatus}" />
                            </f:facet>
                            <h:outputText value="#{item.accessStatus}" />
                        </x:column>
                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.accessLicence}" />
                            </f:facet>
                            <h:outputText value="#{item.accessLicence}" />
                        </x:column>

                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.playerPermissions}" />
                            </f:facet>
                            <h:outputText value="#{item.playerPermissions}" />
                        </x:column>

                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.status}" />
                            </f:facet>
                            <h:outputText value="#{item.status}" />
                        </x:column>



                        <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                            <f:facet name="header">
                                <h:outputText value="#{msgs.details}" />
                            </f:facet>
                            <h:commandLink styleClass="btn font-size-s" id="cancel" action="#{AdministrationForm.administrationPlugin.getDetails}" immediate="true" title="#{msgs.details}">
                                <i class="fa fa-plus-square-o margin-right-5" />
                                <f:setPropertyActionListener target="#{AdministrationForm.administrationPlugin.currentNumber}" value="#{item.bnumber}" />
                            </h:commandLink>

                        </x:column>


                    </x:dataTable>

                    <div>
                        <h:commandLink styleClass="btn font-size-s margin-sides-10" action="#{AdministrationForm.administrationPlugin.cmdMoveFirst}">
                            <i class="fa fa-double-angle-left"></i>
                            <f:ajax execute="@form" render="@form :qaform" />
                        </h:commandLink>
                        <h:commandLink styleClass="btn btn-primary font-size-s" action="#{AdministrationForm.administrationPlugin.cmdMovePrevious}">
                            <i class="fa fa-angle-left"></i>
                            <f:ajax execute="@form" render="@form :qaform" />
                            <h:outputText value=" #{msgs.pagePrevious}" />
                        </h:commandLink>

                        <div class="margin-sides-10">
                        <!-- aktuelle Seite anzeigen -->
                            <x:outputText id="txtMoveTo1" forceId="true" value="#{msgs.seite} #{AdministrationForm.administrationPlugin.pageNumberCurrent} #{msgs.von} #{AdministrationForm.administrationPlugin.pageNumberLast}" onclick="document.getElementById('txtMoveTo2').style.display='inline';
                   document.getElementById('txtMoveTo1').style.display='none'; 
                   document.getElementById('txtMoveTo2').focus();
                   document.getElementById('txtMoveTo2').select();" />

                            <!-- Seite direkt anspringen -->
                            <x:inputText id="txtMoveTo2" forceId="true" value="#{AdministrationForm.administrationPlugin.txtMoveTo}" style="display:none;font-size:9px;width:30px" required="true" onblur="document.getElementById('txtMoveTo2').style.display='none';
                     document.getElementById('txtMoveTo1').style.display='inline';" onkeypress="return submitEnter('cmdMoveTo',event)" />
                            <x:commandButton action="#{NavigationForm.Reload}" id="cmdMoveTo" forceId="true" value="go" style="display:none" />
                        
                        
<!--                             <x:outputText value="#{msgs.seite} #{AdministrationForm.administrationPlugin.pageNumberCurrent} #{msgs.von} #{AdministrationForm.administrationPlugin.pageNumberLast}" onclick="document.getElementById('txtMoveTo2').style.display='inline'; -->
<!--                 document.getElementById('txtMoveTo1').style.display='none';  -->
<!--                 document.getElementById('txtMoveTo2').focus(); -->
<!--                 document.getElementById('txtMoveTo2').select();" /> -->
<!--                             Seite direkt anspringen -->
<!--                             <x:inputText value="#{AdministrationForm.administrationPlugin.txtMoveTo}" style="display:none;font-size:9px;width:30px" required="true" onblur="document.getElementById('txtMoveTo2').style.display='none';document.getElementById('txtMoveTo1').style.display='inline';" onkeypress="return submitEnter('cmdMoveTo',event)" /> -->
<!--                             <x:commandButton action="#{NavigationForm.Reload}" value="go" style="display:none" /> -->
                        </div>

                        <h:commandLink styleClass="btn btn-primary font-size-s" action="#{AdministrationForm.administrationPlugin.cmdMoveNext}">
                            <h:outputText value="#{msgs.pageNext} " />
                            <i class="fa fa-angle-right"></i>
                            <f:ajax execute="@form" render="@form :qaform" />
                        </h:commandLink>
                        <h:commandLink styleClass="btn font-size-s margin-sides-10" action="#{AdministrationForm.administrationPlugin.cmdMoveLast}">
                            <i class="fa fa-double-angle-right"></i>
                            <f:ajax execute="@form" render="@form :qaform" />
                        </h:commandLink>
                    </div>

                </div>
            </h:panelGroup>
        </h:form>
        <h:panelGroup class="row" rendered="#{AdministrationForm.administrationPlugin.detailList != null}">
            <x:dataTable styleClass="table table-hover table-nomargin dataTable table-bordered responsive" var="item" value="#{AdministrationForm.administrationPlugin.detailList}">
                <x:column styleClass="#{!item.active ? 'inactive':'active'}" rendered="false">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.id}" />
                    </f:facet>
                    <h:outputText value="#{item.id}" />
                </x:column>

                <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.creationDate}" />
                    </f:facet>
                    <h:outputText value="#{item.creationDate}" />
                </x:column>

                <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.modificationDate}" />
                    </f:facet>
                    <h:outputText value="#{item.modificationDate}" />
                </x:column>

                <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.deletionDate}" />
                    </f:facet>
                    <h:outputText value="#{item.deletionDate}" />
                </x:column>


                <x:column styleClass="#{!item.active ? 'inactive':'active'}" rendered="false">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.filename}" />
                    </f:facet>
                    <h:outputText value="#{item.filename}" />
                </x:column>

                <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.bnumber}" />
                    </f:facet>
                    <h:outputText value="#{item.bnumber}" />
                </x:column>

                <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.material}" />
                    </f:facet>
                    <h:outputText value="#{item.material}" />
                </x:column>

                <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.accessStatus}" />
                    </f:facet>
                    <h:outputText value="#{item.accessStatus}" />
                </x:column>
                <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.accessLicence}" />
                    </f:facet>
                    <h:outputText value="#{item.accessLicence}" />
                </x:column>

                <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.playerPermissions}" />
                    </f:facet>
                    <h:outputText value="#{item.playerPermissions}" />
                </x:column>

                <x:column styleClass="#{!item.active ? 'inactive':'active'}">
                    <f:facet name="header">
                        <h:outputText value="#{msgs.status}" />
                    </f:facet>
                    <h:outputText value="#{item.status}" />
                </x:column>
            </x:dataTable>
            <h:form>
                <h:commandLink styleClass="btn font-size-s" id="cancel" action="#{AdministrationForm.administrationPlugin.resetData}" immediate="true">
                    <h:outputText value="#{msgs.back}" />
                </h:commandLink>
            </h:form>
        </h:panelGroup>


    </composite:implementation>

</ui:composition>